@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import play.api.data.Form

@import models.admin.UpScanRequests._
@import uk.gov.hmrc.govukfrontend.views.html.components._
@import uk.gov.hmrc.hmrcfrontend.views.html.components.HmrcPageHeading
@import uk.gov.hmrc.govukfrontend.views.html.components.implicits._

@this(layout: Layout,
        govukFileUpload: GovukFileUpload,
        errorSummary: GovukErrorSummary,
        formWithCSRF: FormWithCSRF,
        govukButton: GovukButton,
        govukInput: GovukInput,
        hmrcPageHeading: HmrcPageHeading)

@(fileUploadForm: Form[_], initiateResponse: Option[InitiateResponse] = None)(implicit request: Request[_],messages: Messages)
@layout(
 pageHeading = messages("admin.upload.heading"),
 showBanner = false,
 showAccountInfo = false,
 theForm = fileUploadForm,
 withTimeoutDialog = false
){
 @initiateResponse.map { ir =>
 <form id="councilTaxUploadForm" method="POST" action="@(ir.uploadRequest.href)" enctype="multipart/form-data" novalidate>
  @ir.uploadRequest.fields.map{ case (key, value) =>
  <input type="hidden" name="@key" value="@value">
  }

  @govukFileUpload(
   FileUpload(
    id = "file",
    name = "file",
    label =
     Label(
      forAttr = Some("file"),
      content = Text(messages("label.admin.upload")),
      isPageHeading = false,
      classes = "govuk-label"
     ),
    errorMessage = fileUploadForm.errors.asTextErrorMessageForField("file"),
    attributes =
     Map(
      "accept" -> "application/json"
     )
   )
  )
  <div class="section">
   <button id="submit" class="govuk-button"> Upload </button>
  </div>
   <!--button id="submit" role="button" draggable="false" class="govuk-button" data-module="govuk-button">@messages("councilTaxUpload.submit.button")</button-->
 </form>
}
}