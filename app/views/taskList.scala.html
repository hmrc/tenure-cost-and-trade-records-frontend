@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import actions.SessionRequest
@import uk.gov.hmrc.govukfrontend.views.html.components.GovukButton
@import uk.gov.hmrc.govukfrontend.views.html.components.GovukWarningText
@import uk.gov.hmrc.govukfrontend.views.viewmodels.warningtext.WarningText
@import uk.gov.hmrc.govukfrontend.views.viewmodels.content.Text
@import uk.gov.hmrc.govukfrontend.views.html.components.FormWithCSRF


@this(layout: Layout,
        govukButton: GovukButton,
        govukWarningText: GovukWarningText,
        formWithCSRF: FormWithCSRF
)


@()(implicit request: SessionRequest[_], messages: Messages)

@session = @{
 request.sessionData
}

@layout(
 pageHeading = messages("taskList.heading"),
 backLinkUrl = controllers.connectiontoproperty.routes.ConnectionToThePropertyController.show.url
) {

    <p class="govuk-body">@messages("taskList.subHeading")</p>

    <ol class="app-task-list">

     <li>
      <h2 class="app-task-list__section">
       <span class="app-task-list__section-number">1. </span> @messages("label.section.aboutTheProperty")
      </h2>

      <ul class="app-task-list__items">
       @includes.taskListItem("about-you", "checkYourAnswersAboutTheProperty.aboutYou.heading",
        controllers.aboutyouandtheproperty.routes.AboutYouController.show(),
        session.aboutYouAndTheProperty.flatMap(_.checkYourAnswersAboutTheProperty.map(_.checkYourAnswersAboutYourProperty)),
        session.aboutYouAndTheProperty.flatMap(_.customerDetails)
       )

       @includes.taskListItem("about-the-property", "checkYourAnswersAboutTheProperty.aboutProperty.heading",
        controllers.aboutyouandtheproperty.routes.AboutThePropertyController.show(),
        session.aboutYouAndTheProperty.flatMap(_.checkYourAnswersAboutTheProperty.map(_.checkYourAnswersAboutYourProperty)),
        session.aboutYouAndTheProperty.flatMap(_.propertyDetails),
        session.aboutYouAndTheProperty.flatMap(_.customerDetails).isEmpty
       )

       @includes.taskListItem("licensable-activities", "checkYourAnswersAboutTheProperty.license.heading",
        controllers.aboutyouandtheproperty.routes.LicensableActivitiesController.show(),
        session.aboutYouAndTheProperty.flatMap(_.checkYourAnswersAboutTheProperty.map(_.checkYourAnswersAboutYourProperty)),
        session.aboutYouAndTheProperty.flatMap(_.licensableActivities),
        session.aboutYouAndTheProperty.flatMap(_.propertyDetails).isEmpty
       )
      </ul>
     </li>
    </ol>

    <ol class="app-task-list">
     <li>
      <h2 class="app-task-list__section">
       <span class="app-task-list__section-number">2. </span>About your trading history
      </h2>
      <ul class="app-task-list__items">
       <li class="app-task-list__item">
        <span class="app-task-list__task-name">Occupation and accounting information</span>
        <span class="govuk-tag app-task-list__tag govuk-tag--grey" id="goods-summary-not-started">
         Cannot start yet
        </span>
       </li>
       <li class="app-task-list__item">
        <span class="app-task-list__task-name">Turnover</span>
        <span class="govuk-tag app-task-list__tag govuk-tag--grey" id="goods-summary-not-started">
         Cannot start yet
        </span>
       </li>
      </ul>
     </li>
    </ol>

    <ol class="app-task-list">
     <li>
      <h2 class="app-task-list__section">
       <span class="app-task-list__section-number">3. </span> About any franchises or lettings
      </h2>
      <ul class="app-task-list__items">
       <li class="app-task-list__item">
        <span class="app-task-list__task-name">Separate business run from the property</span>
        <span class="govuk-tag app-task-list__tag govuk-tag--grey" id="goods-summary-not-started">
         Cannot start yet
        </span>
       </li>
       <li class="app-task-list__item">
        <span class="app-task-list__task-name">Lettings</span>
        <span class="govuk-tag app-task-list__tag govuk-tag--grey" id="goods-summary-not-started">
         Cannot start yet
        </span>
       </li>
      </ul>
     </li>
    </ol>

    <ol class="app-task-list">
     <li>
      <h2 class="app-task-list__section">
       <span class="app-task-list__section-number">4. </span> About your lease or agreement
      </h2>
      <ul class="app-task-list__items">
       <li class="app-task-list__item">
        <span class="app-task-list__task-name">About your landlord</span>
        <span class="govuk-tag app-task-list__tag govuk-tag--grey" id="goods-summary-not-started">
         Cannot start yet
        </span>
       </li>
       <li class="app-task-list__item">
        <span class="app-task-list__task-name">Changes to your lease</span>
        <span class="govuk-tag app-task-list__tag govuk-tag--grey" id="goods-summary-not-started">
         Cannot start yet
        </span>
       </li>
       <li class="app-task-list__item">
        <span class="app-task-list__task-name">Lease start date and rent paid</span>
        <span class="govuk-tag app-task-list__tag govuk-tag--grey" id="goods-summary-not-started">
         Cannot start yet
        </span>
       </li>
       <li class="app-task-list__item">
        <span class="app-task-list__task-name">What the rent includes</span>
        <span class="govuk-tag app-task-list__tag govuk-tag--grey" id="goods-summary-not-started">
         Cannot start yet
        </span>
       </li>
       <li class="app-task-list__item">
        <span class="app-task-list__task-name">How the rent was calculated</span>
        <span class="govuk-tag app-task-list__tag govuk-tag--grey" id="goods-summary-not-started">
         Cannot start yet
        </span>
       </li>
       <li class="app-task-list__item">
        <span class="app-task-list__task-name">Exclusions, restrictions or incentives</span>
        <span class="govuk-tag app-task-list__tag govuk-tag--grey" id="goods-summary-not-started">
         Cannot start yet
        </span>
       </li>
      </ul>
     </li>
    </ol>

    <ol class="app-task-list">
     <li>
      <h2 class="app-task-list__section">
       <span class="app-task-list__section-number">5. </span> @messages("label.section.additionalInformation")
      </h2>
      <ul class="app-task-list__items">
       @includes.taskListItem("further-information-or-remarks", "furtherInformationOrRemarksTasklist.heading",
        controllers.additionalinformation.routes.FurtherInformationOrRemarksController.show(),
        session.additionalInformation.flatMap(_.checkYourAnswersAdditionalInformation.map(_.checkYourAnswersAdditionalInformation)),
        session.additionalInformation.flatMap(_.furtherInformationOrRemarksDetails),
        session.aboutYouAndTheProperty.flatMap(_.propertyDetails).isEmpty
       )

       @includes.taskListItem("alternate-contact-details", "alternativeContactDetails.heading",
        controllers.additionalinformation.routes.AlternativeContactDetailsController.show(),
        session.additionalInformation.flatMap(_.checkYourAnswersAdditionalInformation.map(_.checkYourAnswersAdditionalInformation)),
        session.additionalInformation.flatMap(_.altContactInformation),
        session.additionalInformation.flatMap(_.furtherInformationOrRemarksDetails).isEmpty
       )
      </ul></li></ol>


  @formWithCSRF(action = controllers.routes.FormSubmissionController.submit()) {

    <legend class="govuk-fieldset__legend govuk-!-font-weight-bold">
      @messages("declaration.heading")
    </legend>

    <p class="govuk-body">@messages("declaration.information")</p>

    @govukWarningText(WarningText(
      content = Text(messages("hint.declaration")),
      classes = "govuk-!-margin-bottom-2"
    ))

    @includes.continueButton(govukButton, isSend = true)
  }
}


